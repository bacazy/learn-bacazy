# -*- coding: utf-8 -*-

from scipy import optimize
import matplotlib.pyplot as plt
import numpy as np
from skimage import segmentation


gs = [
      {
            'gs':[0.538865,0.799106,1.05935,1.31959,1.57983,1.84007,2.10031,2.36055,2.62079,2.88103,3.14127,3.40152,3.66176,3.922],
            'fraction':[0.384210639,0.073684083,0.063157944,0.110526217,0.031578972,0.063157944,0.068420921,0.05263162,0.02631581,
                  0.042105296,0.02631581,0.031578972,0.010526306,0.015789467]
      },
      {
            'gs':[0.194381,0.231273,0.275168,0.327394,0.389533,0.463465,0.551429,0.656088,0.780611,0.928768,1.10505,1.31478,
                  1.56432,1.86122,2.21448,4.63478,5.13485],
            'fraction':[0.158283152,0.195064881,0.069016508,0.141339414,0.090093344,0.104144937,0.074389054,0.06447046,
                        0.042153774,0.023143286,0.013224692,0.009918534,0.006199086,0.006199086,0.001239819,0.000235567,0.000884404]
      },
      {
            'gs':[0.117973362,0.267779301,0.411290791,0.569443516,0.729352481,0.89578022,1.097268222,1.306034404,1.502514,1.757560784,2.140793354,2.58560851,4.152159,4.703277285],
            'fraction':[0.18865138,0.28523988,0.140416531,0.114036189,0.096350244,0.089502343,0.046448188,0.01667374,0.011420043,0.004466174,
                        0.004466174,0.000893236,0.00126616,0.000169716]
      }
]


def rescale(g):
      sum = np.sum(np.array(g))
      return [i / sum for i in g]


def draw_gschart(g, width=0.1, xlim=[0,5]):
      y = rescale(g['fraction'])
      plt.bar(g['gs'], y, color='r', width=width)
      plt.xlabel('grain size (um)', fontsize=16)
      plt.ylabel('fraction', fontsize=16)
      plt.xlim(xlim)
      plt.show()


d = gs[0]
draw_gschart(d)

d = gs[1]
draw_gschart(d, 0.03)

d = gs[2]
draw_gschart(d, 0.03)